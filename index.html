<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="description" content="ARIA - Esperienza Immersiva Showroom Luxury Italiano">
    <title>ARIA | Showroom Immersivo</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Cormorant+Garamond:wght@400;500;600&display=swap"
        rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loader-content">
            <div class="loader-ring"></div>
            <p class="loader-text">Caricamento esperienza...</p>
            <div class="loader-progress">
                <div class="loader-progress-bar"></div>
            </div>
            <p class="loader-percentage">0%</p>
        </div>
    </div>

    <!-- Orientation Screen (Mobile Portrait) -->
    <div id="orientation-screen" class="orientation-screen hidden" aria-hidden="true">
        <div class="orientation-content">
            <svg class="orientation-icon" width="140" height="140" viewBox="0 0 120 120" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <rect x="34" y="16" width="52" height="88" rx="10"></rect>
                <circle cx="60" cy="88" r="3"></circle>
                <path d="M18 44a40 40 0 0 1 58-22"></path>
                <path d="M76 20h-14m14 0V6"></path>
                <path d="M102 76a40 40 0 0 1-58 22"></path>
                <path d="M44 100h14m-14 0v14"></path>
            </svg>
            <p>Ruota il dispositivo in orizzontale per continuare</p>
        </div>
    </div>

    <!-- Fullscreen Prompt (Mobile) -->
    <div id="fullscreen-prompt" class="fullscreen-prompt hidden" aria-hidden="true">
        <div class="fullscreen-card">
            <p class="fullscreen-text">Vuoi visualizzare a tutto schermo?</p>
            <div class="fullscreen-actions">
                <button id="fullscreen-yes" class="fullscreen-btn fullscreen-yes" type="button">Si</button>
                <button id="fullscreen-no" class="fullscreen-btn fullscreen-no" type="button">No</button>
            </div>
        </div>
    </div>

    <!-- Intro Screen -->
    <div id="intro-screen" class="screen hidden">
        <div class="intro-content">
            <div class="intro-top">
                <img src="./Assets/LOGO.svg" alt="RDD Italia" class="intro-logo">
            </div>

            <div class="intro-center">
                <h1 class="intro-title">ARIA</h1>
                <p class="intro-subtitle">Esperienza Immersiva</p>
                <div class="intro-divider"></div>
            </div>

            <div class="intro-bottom">
                <p class="intro-description">Scopri la nuova collezione in un ambiente virtuale esclusivo</p>
                <button id="btn-start" class="btn-primary">
                    <span>Inizia l'Esperienza</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Main 3D Canvas -->
    <canvas id="canvas-3d"></canvas>

    <!-- UI Overlay -->
    <div id="ui-overlay" class="hidden">
        <!-- ARIA Status Indicator -->
        <div id="aria-status" class="aria-indicator">
            <div class="aria-pulse"></div>
            <span class="aria-label">ARIA</span>
        </div>
        <button id="skip-intro" class="skip-intro hidden" type="button">Salta introduzione</button>
        <button id="stop-cinematic" class="stop-cinematic hidden" type="button">Stop</button>
        <button id="fullscreen-toggle" class="fullscreen-toggle hidden" type="button" aria-pressed="false" aria-label="Schermo intero" title="Schermo intero">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M8 3H3v5" />
                <path d="M3 3l6 6" />
                <path d="M16 3h5v5" />
                <path d="M21 3l-6 6" />
                <path d="M8 21H3v-5" />
                <path d="M3 21l6-6" />
                <path d="M16 21h5v-5" />
                <path d="M21 21l-6-6" />
            </svg>
        </button>

        <!-- Collection Menu -->
        <div id="collection-menu" class="panel hidden">
            <h2 class="panel-title">Collezioni</h2>
            <div class="collection-grid">
                <button class="collection-item" data-collection="elegance">
                    <span class="collection-name">Bonton 200</span>
                    <span class="collection-desc">Design morbido, comfort avvolgente</span>
                </button>
                <button class="collection-item" data-collection="minimal">
                    <span class="collection-name">Dolores 274X</span>
                    <span class="collection-desc">Linee essenziali, anima contemporanea</span>
                </button>
                <button class="collection-item" data-collection="luxury">
                    <span class="collection-name">Eclipse</span>
                    <span class="collection-desc">Presenza scenica, stile iconico</span>
                </button>
            </div>
        </div>

        <!-- Product Info Panel -->
        <div id="product-panel" class="panel hidden">
            <button id="btn-back" class="btn-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7" />
                </svg>
            </button>
            <h2 class="panel-title" id="product-name">Divano Bonton 200</h2>
            <p class="product-description" id="product-description">
                Un capolavoro di design italiano, realizzato con materiali premium e attenzione ai dettagli.
            </p>

            <!-- Color Selector -->
            <div class="color-selector">
                <p class="color-label">Seleziona Colore</p>
                <div class="color-options">
                    <button class="color-btn active" data-color="#F5F0E8" title="Crema"></button>
                    <button class="color-btn" data-color="#6B6B6B" title="Grigio"></button>
                    <button class="color-btn" data-color="#A0522D" title="Terracotta"></button>
                    <button class="color-btn" data-color="#2F4F2F" title="Verde Bosco"></button>
                </div>
            </div>

            <!-- CTA -->
            <button id="btn-cta" class="btn-primary btn-cta">
                <span>Richiedi Preventivo</span>
            </button>
        </div>

        <!-- Subtitles for ARIA voice -->
        <div id="subtitles" class="subtitles hidden">
            <p id="subtitle-text"></p>
        </div>

        <!-- Interact Hint -->
        <div id="interact-hint" class="hidden interact-hint">
            <svg width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="3.5" r="2.2" />
                <path d="M12 5.7v7.3" />
                <path d="M9 12v-1.6a1.4 1.4 0 1 1 2.8 0V12" />
                <path d="M12 12v-3a1.4 1.4 0 1 1 2.8 0V12" />
                <path d="M14.8 12v-1.4a1.4 1.4 0 1 1 2.8 0V15" />
                <path d="M8.8 12v3.4A4.2 4.2 0 0 0 13 19.6h1.4a3.6 3.6 0 0 0 3.6-3.6V12" />
            </svg>
            <span>Clicca per ruotare 360Â°</span>
        </div>

        <!-- Collection Buttons (sotto ARIA) -->
        <div id="collection-buttons" class="collection-buttons hidden">
            <p class="collection-prompt">Scegli una collezione</p>
            <div class="collection-buttons-row">
                <button class="collection-btn" data-collection="elegance">
                    <span class="btn-label">Bonton 200</span>
                </button>
                <button class="collection-btn" data-collection="minimal">
                    <span class="btn-label">Dolores 274X</span>
                </button>
                <button class="collection-btn" data-collection="luxury">
                    <span class="btn-label">Eclipse</span>
                </button>
            </div>
        </div>

        <!-- Voice Bar -->
        <div id="voice-bar" class="voice-bar" data-state="offline">
            <button id="voice-toggle" class="voice-toggle" type="button" aria-pressed="false">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                    <path d="M12 3a3 3 0 0 1 3 3v6a3 3 0 0 1-6 0V6a3 3 0 0 1 3-3Z" />
                    <path d="M5 11a7 7 0 0 0 14 0" />
                    <path d="M12 18v3" />
                    <path d="M8 21h8" />
                </svg>
            </button>
            <div class="voice-text">
                <span class="voice-label">Parla con ARIA</span>
                <span id="voice-status" class="voice-status"></span>
            </div>
            <span class="voice-dot" aria-hidden="true"></span>
        </div>

    </div>

    <!-- Contact Modal -->
    <div id="contact-modal" class="modal hidden">
        <div class="modal-content">
            <button id="modal-close" class="btn-icon modal-close">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18M6 6l12 12" />
                </svg>
            </button>
            <h2>Richiedi Preventivo</h2>
            <p>Compila il form per essere ricontattato da un nostro consulente.</p>
            <form id="contact-form">
                <input type="text" placeholder="Nome e Cognome" required>
                <input type="email" placeholder="Email" required>
                <input type="tel" placeholder="Telefono">
                <textarea placeholder="Messaggio (opzionale)"></textarea>
                <button type="submit" class="btn-primary">Invia Richiesta</button>
            </form>
        </div>
    </div>

    <!-- Three.js & Dependencies -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
    }
    </script>

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/gsap.min.js"></script>

    <!-- App Modules -->
    <script type="module" src="js/main.js"></script>
    <script type="module" src="js/voice-assistant.js"></script>
</body>

</html>
